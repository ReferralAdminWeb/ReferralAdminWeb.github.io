"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[362],{64317:function(se,H,e){var A=e(1413),i=e(91),U=e(22270),v=e(67294),G=e(66758),T=e(45456),z=e(85893),N=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],I=function(m,x){var j=m.fieldProps,O=m.children,C=m.params,D=m.proFieldProps,$=m.mode,b=m.valueEnum,Y=m.request,W=m.showSearch,B=m.options,K=(0,i.Z)(m,N),k=(0,v.useContext)(G.Z);return(0,z.jsx)(T.Z,(0,A.Z)((0,A.Z)({valueEnum:(0,U.h)(b),request:Y,params:C,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,A.Z)({options:B,mode:$,showSearch:W,getPopupContainer:k.getPopupContainer},j),ref:x,proFieldProps:D},K),{},{children:O}))},Q=v.forwardRef(function(P,m){var x=P.fieldProps,j=P.children,O=P.params,C=P.proFieldProps,D=P.mode,$=P.valueEnum,b=P.request,Y=P.options,W=(0,i.Z)(P,E),B=(0,A.Z)({options:Y,mode:D||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},x),K=(0,v.useContext)(G.Z);return(0,z.jsx)(T.Z,(0,A.Z)((0,A.Z)({valueEnum:(0,U.h)($),request:b,params:O,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,A.Z)({getPopupContainer:K.getPopupContainer},B),ref:m,proFieldProps:C},W),{},{children:j}))}),F=v.forwardRef(I),X=Q,L=F;L.SearchSelect=X,L.displayName="ProFormComponent",H.Z=L},60757:function(se,H,e){e.r(H),e.d(H,{default:function(){return oe}});var A=e(15009),i=e.n(A),U=e(99289),v=e.n(U),G=e(5574),T=e.n(G),z=e(97857),N=e.n(z),E=e(80854),I="https://api.avevip.com";function Q(f,p){return F.apply(this,arguments)}function F(){return F=v()(i()().mark(function f(p,c){var M;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.request)(I+"/api/superAdmin/getAdminPageList",N()({method:"GET",params:N()({},p)},c||{}));case 2:if(M=o.sent,M.code===0){o.next=5;break}throw M.msg;case 5:return o.abrupt("return",M);case 6:case"end":return o.stop()}},f)})),F.apply(this,arguments)}function X(f,p,c){return L.apply(this,arguments)}function L(){return L=v()(i()().mark(function f(p,c,M){var h;return i()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,E.request)(I+"/api/superAdmin/addAdmin",{method:"POST",data:{role:p,username:c,password:M}});case 2:return h=Z.sent,Z.abrupt("return",h);case 4:case"end":return Z.stop()}},f)})),L.apply(this,arguments)}function P(f,p){return m.apply(this,arguments)}function m(){return m=v()(i()().mark(function f(p,c){var M;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.request)(I+"/api/superAdmin/editStatus",{method:"POST",data:{id:p,status:c}});case 2:return M=o.sent,o.abrupt("return",M);case 4:case"end":return o.stop()}},f)})),m.apply(this,arguments)}function x(f){return j.apply(this,arguments)}function j(){return j=v()(i()().mark(function f(p){var c;return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,E.request)(I+"/api/superAdmin/resetPassword",{method:"POST",data:{id:p}});case 2:return c=h.sent,h.abrupt("return",c);case 4:case"end":return h.stop()}},f)})),j.apply(this,arguments)}var O=e(1413),C=e(67294),D=e(42110),$=e(91146),b=function(p,c){return C.createElement($.Z,(0,O.Z)((0,O.Z)({},p),{},{ref:c,icon:D.Z}))},Y=C.forwardRef(b),W=Y,B=e(90930),K=e(38521),k=e(37476),te=e(64317),_=e(5966),ne=e(28248),w=e(2453),ie=e(7134),V=e(28036),ue=e(27484),q=e.n(ue),t=e(85893),de=function(){var p=ne.Z.useModal(),c=T()(p,2),M=c[0],h=c[1],o=(0,C.useState)(!1),Z=T()(o,2),le=Z[0],ee=Z[1],me=(0,C.useState)(),re=T()(me,2),fe=re[0],he=re[1],J=(0,C.useRef)(),a=(0,E.useIntl)(),ae=function(){var g=v()(i()().mark(function l(s,u){var n,S;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,P(s,u);case 3:if(S=d.sent,S.code===0){d.next=9;break}if(S.code!=-2){d.next=8;break}return w.ZP.error(S.msg),d.abrupt("return",!1);case 8:throw S.msg;case 9:return w.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(n=J.current)===null||n===void 0||n.reload(),d.abrupt("return",!0);case 14:return d.prev=14,d.t0=d.catch(0),w.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),d.abrupt("return",!1);case 18:case"end":return d.stop()}},l,null,[[0,14]])}));return function(s,u){return g.apply(this,arguments)}}(),pe=function(){var g=v()(i()().mark(function l(s){var u,n;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x(s);case 3:if(n=r.sent,n.code===0){r.next=9;break}if(n.code!=-2){r.next=8;break}return w.ZP.error(n.msg),r.abrupt("return",!1);case 8:throw n.msg;case 9:return M.success({title:a.formatMessage({id:"pages.AdminList.resetPassword.success"}),content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:a.formatMessage({id:"pages.AdminList.resetPassword.new"})+n.data}),(0,t.jsx)("div",{children:a.formatMessage({id:"pages.AdminList.resetPassword.tips"})})]})}),(u=J.current)===null||u===void 0||u.reload(),r.abrupt("return",!0);case 14:return r.prev=14,r.t0=r.catch(0),w.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 18:case"end":return r.stop()}},l,null,[[0,14]])}));return function(s){return g.apply(this,arguments)}}(),ce=function(){var g=v()(i()().mark(function l(s){var u,n;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,X(s.role,s.username,s.password);case 3:if(n=r.sent,n.code===0){r.next=9;break}if(n.code!=-2){r.next=8;break}return w.ZP.error(n.msg),r.abrupt("return",!1);case 8:throw n.msg;case 9:return w.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(u=J.current)===null||u===void 0||u.reload(),r.abrupt("return",!0);case 14:return r.prev=14,r.t0=r.catch(0),w.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 18:case"end":return r.stop()}},l,null,[[0,14]])}));return function(s){return g.apply(this,arguments)}}(),ve=[{title:"ID",dataIndex:"id"},{title:a.formatMessage({id:"createTime"}),dataIndex:"createTime",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(t.Fragment,{children:q()(s.createTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"updateTime"}),dataIndex:"updateTime",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(t.Fragment,{children:q()(s.updateTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"status"}),dataIndex:"status",valueEnum:{normal:{text:a.formatMessage({id:"normal"}),color:"green"},disabled:{text:a.formatMessage({id:"disabled"}),color:"red"}}},{title:a.formatMessage({id:"role"}),dataIndex:"role",valueEnum:{operational:{text:a.formatMessage({id:"operational"})},superAdmin:{text:a.formatMessage({id:"superAdmin"})}}},{title:a.formatMessage({id:"username"}),dataIndex:"username"},{title:a.formatMessage({id:"avatar"}),dataIndex:"avatar",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(ie.C,{size:"small",src:(0,t.jsx)("img",{src:s.avatar,alt:"avatar"})})}},{title:a.formatMessage({id:"lastLoginTime"}),dataIndex:"lastLoginTs",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(t.Fragment,{children:q().unix(s.lastLoginTs).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"pages.vipList.options"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(l,s){var u=[];return s.status=="normal"?u.push((0,t.jsx)(V.ZP,{type:"link",onClick:function(){ae(s.id,"disabled")},children:a.formatMessage({id:"disable"})})):u.push((0,t.jsx)(V.ZP,{type:"link",onClick:function(){ae(s.id,"normal")},children:a.formatMessage({id:"enable"})})),u.push((0,t.jsx)(V.ZP,{type:"link",onClick:function(){pe(s.id)},children:a.formatMessage({id:"resetPassword"})})),u}}];return(0,t.jsxs)(B._z,{children:[(0,t.jsx)(K.Z,{actionRef:J,toolBarRender:function(){return[(0,t.jsxs)(V.ZP,{type:"primary",onClick:function(){ee(!0)},children:[(0,t.jsx)(W,{}),a.formatMessage({id:"new"})]},"primary")]},rowKey:"id",search:{labelWidth:120},request:function(){var g=v()(i()().mark(function l(s,u){var n,S,r,d,y;return i()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return console.log(u),s.page=s==null?void 0:s.current,delete s.current,R.next=5,Q(s,u);case 5:return y=R.sent,console.log({data:(n=y.data)===null||n===void 0?void 0:n.list,success:y.code==0,total:(S=y.data)===null||S===void 0?void 0:S.total}),R.abrupt("return",{data:(r=y.data)===null||r===void 0?void 0:r.list,success:y.code==0,total:(d=y.data)===null||d===void 0?void 0:d.total});case 8:case"end":return R.stop()}},l)}));return function(l,s){return g.apply(this,arguments)}}(),columns:ve}),(0,t.jsxs)(k.Y,{title:a.formatMessage({id:"pages.AdminList.newAdmin"}),open:le,onFinish:ce,onOpenChange:ee,children:[(0,t.jsx)(te.Z,{name:"role",label:a.formatMessage({id:"role"}),valueEnum:{operational:a.formatMessage({id:"operational"}),superAdmin:a.formatMessage({id:"superAdmin"})},rules:[{required:!0,message:"Please select role!"}]}),(0,t.jsx)(_.Z,{name:"username",fieldProps:{maxLength:24},label:a.formatMessage({id:"username"}),rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]}),(0,t.jsx)(_.Z.Password,{name:"password",fieldProps:{maxLength:24},label:a.formatMessage({id:"password"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:a.formatMessage({id:"pages.Accout.Setting.password.description"})}]})]}),h]})},oe=de}}]);
