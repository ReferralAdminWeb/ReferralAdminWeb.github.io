"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[362],{64317:function(se,H,e){var A=e(1413),i=e(91),U=e(22270),v=e(67294),k=e(66758),y=e(45456),G=e(85893),z=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],J=function(p,L){var T=p.fieldProps,C=p.children,x=p.params,D=p.proFieldProps,$=p.mode,b=p.valueEnum,Y=p.request,W=p.showSearch,B=p.options,K=(0,i.Z)(p,z),X=(0,v.useContext)(k.Z);return(0,G.jsx)(y.Z,(0,A.Z)((0,A.Z)({valueEnum:(0,U.h)(b),request:Y,params:x,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,A.Z)({options:B,mode:$,showSearch:W,getPopupContainer:X.getPopupContainer},T),ref:L,proFieldProps:D},K),{},{children:C}))},O=v.forwardRef(function(m,p){var L=m.fieldProps,T=m.children,C=m.params,x=m.proFieldProps,D=m.mode,$=m.valueEnum,b=m.request,Y=m.options,W=(0,i.Z)(m,E),B=(0,A.Z)({options:Y,mode:D||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},L),K=(0,v.useContext)(k.Z);return(0,G.jsx)(y.Z,(0,A.Z)((0,A.Z)({valueEnum:(0,U.h)($),request:b,params:C,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,A.Z)({getPopupContainer:K.getPopupContainer},B),ref:p,proFieldProps:x},W),{},{children:T}))}),Q=v.forwardRef(J),R=O,F=Q;F.SearchSelect=R,F.displayName="ProFormComponent",H.Z=F},60757:function(se,H,e){e.r(H),e.d(H,{default:function(){return de}});var A=e(15009),i=e.n(A),U=e(99289),v=e.n(U),k=e(5574),y=e.n(k),G=e(97857),z=e.n(G),E=e(80854);function J(h,c){return O.apply(this,arguments)}function O(){return O=v()(i()().mark(function h(c,f){var M;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.request)("https://ref.gao.link/api/superAdmin/getAdminPageList",z()({method:"GET",params:z()({},c)},f||{}));case 2:if(M=o.sent,M.code===0){o.next=5;break}throw M.msg;case 5:return o.abrupt("return",M);case 6:case"end":return o.stop()}},h)})),O.apply(this,arguments)}function Q(h,c,f){return R.apply(this,arguments)}function R(){return R=v()(i()().mark(function h(c,f,M){var g;return i()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,E.request)("https://ref.gao.link/api/superAdmin/addAdmin",{method:"POST",data:{role:c,username:f,password:M}});case 2:return g=Z.sent,Z.abrupt("return",g);case 4:case"end":return Z.stop()}},h)})),R.apply(this,arguments)}function F(h,c){return m.apply(this,arguments)}function m(){return m=v()(i()().mark(function h(c,f){var M;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.request)("https://ref.gao.link/api/superAdmin/editStatus",{method:"POST",data:{id:c,status:f}});case 2:return M=o.sent,o.abrupt("return",M);case 4:case"end":return o.stop()}},h)})),m.apply(this,arguments)}function p(h){return L.apply(this,arguments)}function L(){return L=v()(i()().mark(function h(c){var f;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,E.request)("https://ref.gao.link/api/superAdmin/resetPassword",{method:"POST",data:{id:c}});case 2:return f=g.sent,g.abrupt("return",f);case 4:case"end":return g.stop()}},h)})),L.apply(this,arguments)}var T=e(1413),C=e(67294),x=e(42110),D=e(91146),$=function(c,f){return C.createElement(D.Z,(0,T.Z)((0,T.Z)({},c),{},{ref:f,icon:x.Z}))},b=C.forwardRef($),Y=b,W=e(90930),B=e(38521),K=e(37476),X=e(64317),_=e(5966),te=e(28248),w=e(2453),ne=e(7134),N=e(28036),ie=e(27484),q=e.n(ie),t=e(85893),ue=function(){var c=te.Z.useModal(),f=y()(c,2),M=f[0],g=f[1],o=(0,C.useState)(!1),Z=y()(o,2),oe=Z[0],ee=Z[1],le=(0,C.useState)(),re=y()(le,2),fe=re[0],ve=re[1],V=(0,C.useRef)(),a=(0,E.useIntl)(),ae=function(){var P=v()(i()().mark(function l(s,u){var n,S;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,F(s,u);case 3:if(S=d.sent,S.code===0){d.next=9;break}if(S.code!=-2){d.next=8;break}return w.ZP.error(S.msg),d.abrupt("return",!1);case 8:throw S.msg;case 9:return w.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(n=V.current)===null||n===void 0||n.reload(),d.abrupt("return",!0);case 14:return d.prev=14,d.t0=d.catch(0),w.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),d.abrupt("return",!1);case 18:case"end":return d.stop()}},l,null,[[0,14]])}));return function(s,u){return P.apply(this,arguments)}}(),me=function(){var P=v()(i()().mark(function l(s){var u,n;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p(s);case 3:if(n=r.sent,n.code===0){r.next=9;break}if(n.code!=-2){r.next=8;break}return w.ZP.error(n.msg),r.abrupt("return",!1);case 8:throw n.msg;case 9:return M.success({title:a.formatMessage({id:"pages.AdminList.resetPassword.success"}),content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:a.formatMessage({id:"pages.AdminList.resetPassword.new"})+n.data}),(0,t.jsx)("div",{children:a.formatMessage({id:"pages.AdminList.resetPassword.tips"})})]})}),(u=V.current)===null||u===void 0||u.reload(),r.abrupt("return",!0);case 14:return r.prev=14,r.t0=r.catch(0),w.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 18:case"end":return r.stop()}},l,null,[[0,14]])}));return function(s){return P.apply(this,arguments)}}(),pe=function(){var P=v()(i()().mark(function l(s){var u,n;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Q(s.role,s.username,s.password);case 3:if(n=r.sent,n.code===0){r.next=9;break}if(n.code!=-2){r.next=8;break}return w.ZP.error(n.msg),r.abrupt("return",!1);case 8:throw n.msg;case 9:return w.ZP.success(a.formatMessage({id:"pages.vipList.update.success"})),(u=V.current)===null||u===void 0||u.reload(),r.abrupt("return",!0);case 14:return r.prev=14,r.t0=r.catch(0),w.ZP.error(a.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 18:case"end":return r.stop()}},l,null,[[0,14]])}));return function(s){return P.apply(this,arguments)}}(),ce=[{title:"ID",dataIndex:"id"},{title:a.formatMessage({id:"createTime"}),dataIndex:"createTime",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(t.Fragment,{children:q()(s.createTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"updateTime"}),dataIndex:"updateTime",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(t.Fragment,{children:q()(s.updateTime).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"status"}),dataIndex:"status",valueEnum:{normal:{text:a.formatMessage({id:"normal"}),color:"green"},disabled:{text:a.formatMessage({id:"disabled"}),color:"red"}}},{title:a.formatMessage({id:"role"}),dataIndex:"role",valueEnum:{operational:{text:a.formatMessage({id:"operational"})},superAdmin:{text:a.formatMessage({id:"superAdmin"})}}},{title:a.formatMessage({id:"username"}),dataIndex:"username"},{title:a.formatMessage({id:"avatar"}),dataIndex:"avatar",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(ne.C,{size:"small",src:(0,t.jsx)("img",{src:s.avatar,alt:"avatar"})})}},{title:a.formatMessage({id:"lastLoginTime"}),dataIndex:"lastLoginTs",hideInSearch:!0,render:function(l,s){return(0,t.jsx)(t.Fragment,{children:q().unix(s.lastLoginTs).format("YYYY-MM-DD HH:mm:ss")})}},{title:a.formatMessage({id:"pages.vipList.options"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(l,s){var u=[];return s.status=="normal"?u.push((0,t.jsx)(N.ZP,{type:"link",onClick:function(){ae(s.id,"disabled")},children:a.formatMessage({id:"disable"})})):u.push((0,t.jsx)(N.ZP,{type:"link",onClick:function(){ae(s.id,"normal")},children:a.formatMessage({id:"enable"})})),u.push((0,t.jsx)(N.ZP,{type:"link",onClick:function(){me(s.id)},children:a.formatMessage({id:"resetPassword"})})),u}}];return(0,t.jsxs)(W._z,{children:[(0,t.jsx)(B.Z,{actionRef:V,toolBarRender:function(){return[(0,t.jsxs)(N.ZP,{type:"primary",onClick:function(){ee(!0)},children:[(0,t.jsx)(Y,{}),a.formatMessage({id:"new"})]},"primary")]},rowKey:"id",search:{labelWidth:120},request:function(){var P=v()(i()().mark(function l(s,u){var n,S,r,d,j;return i()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return console.log(u),s.page=s==null?void 0:s.current,delete s.current,I.next=5,J(s,u);case 5:return j=I.sent,console.log({data:(n=j.data)===null||n===void 0?void 0:n.list,success:j.code==0,total:(S=j.data)===null||S===void 0?void 0:S.total}),I.abrupt("return",{data:(r=j.data)===null||r===void 0?void 0:r.list,success:j.code==0,total:(d=j.data)===null||d===void 0?void 0:d.total});case 8:case"end":return I.stop()}},l)}));return function(l,s){return P.apply(this,arguments)}}(),columns:ce}),(0,t.jsxs)(K.Y,{title:a.formatMessage({id:"pages.AdminList.newAdmin"}),open:oe,onFinish:pe,onOpenChange:ee,children:[(0,t.jsx)(X.Z,{name:"role",label:a.formatMessage({id:"role"}),valueEnum:{operational:a.formatMessage({id:"operational"}),superAdmin:a.formatMessage({id:"superAdmin"})},rules:[{required:!0,message:"Please select role!"}]}),(0,t.jsx)(_.Z,{name:"username",fieldProps:{maxLength:24},label:a.formatMessage({id:"username"}),rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]}),(0,t.jsx)(_.Z.Password,{name:"password",fieldProps:{maxLength:24},label:a.formatMessage({id:"password"}),rules:[{required:!0,message:"Please enter new password!"},{min:6,message:a.formatMessage({id:"pages.Accout.Setting.password.description"})}]})]}),g]})},de=ue}}]);
