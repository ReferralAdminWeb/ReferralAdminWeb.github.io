"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[401],{64487:function(G,A,t){t.r(A);var y=t(15009),v=t.n(y),b=t(99289),l=t.n(b),V=t(5574),f=t.n(V),h=t(12095),n=t(65763),L=t(90930),D=t(38521),R=t(37476),C=t(5966),K=t(20040),W=t(80854),B=t(2453),U=t(28036),x=t(72051),j=t(85265),O=t(67294),g=t(85893),m=function(){var i=(0,O.useState)(!1),_=f()(i,2),a=_[0],P=_[1],p=(0,O.useState)(),H=f()(p,2),z=H[0],S=H[1],re=(0,O.useState)(),J=f()(re,2),$=J[0],N=J[1],se=B.ZP.useMessage(),Y=f()(se,2),Q=Y[0],me=Y[1],ne=(0,O.useState)(!1),q=f()(ne,2),ie=q[0],ee=q[1],te=(0,O.useRef)(),ae=(0,O.useRef)(),s=(0,W.useIntl)(),ue=function(){var c=l()(v()().mark(function u(e){var E,M;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(z){r.next=2;break}return r.abrupt("return",!1);case 2:return r.prev=2,r.next=5,(0,h.Nq)(z.guid,e);case 5:if(M=r.sent,M.code===0){r.next=11;break}if(M.code!=-2){r.next=10;break}return B.ZP.error(M.msg),r.abrupt("return",!1);case 10:throw M.msg;case 11:return B.ZP.success(s.formatMessage({id:"pages.vipList.update.success"})),(E=te.current)===null||E===void 0||E.reload(),S(void 0),r.abrupt("return",!0);case 17:return r.prev=17,r.t0=r.catch(2),B.ZP.error(s.formatMessage({id:"pages.vipList.update.error"})),r.abrupt("return",!1);case 21:case"end":return r.stop()}},u,null,[[2,17]])}));return function(e){return c.apply(this,arguments)}}(),le=function(){var c=l()(v()().mark(function u(e){var E;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return S(e),Q.loading("load..."),o.prev=2,o.next=5,(0,h.DJ)(e.guid);case 5:E=o.sent,N(E),ee(!0),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(2),B.ZP.error(s.formatMessage({id:"pages.vipList.getVipDetail.error"})),S(void 0);case 14:Q.destroy();case 15:case"end":return o.stop()}},u,null,[[2,10]])}));return function(e){return c.apply(this,arguments)}}(),de=[{title:"",dataIndex:"type",key:"type"},{title:s.formatMessage({id:"pages.vipList.total"}),dataIndex:"total",key:"total"},{title:"1",dataIndex:"level1",key:"level1"},{title:"2",dataIndex:"level2",key:"level2"},{title:"3",dataIndex:"level3",key:"level3"},{title:"4",dataIndex:"level4",key:"level4"},{title:"5",dataIndex:"level5",key:"level5"}],oe=[{title:"ID",dataIndex:"id",hideInSearch:!0,sorter:!0},{title:"Tg Username",dataIndex:"tgUsername"},{title:"Email",dataIndex:"email"},{title:s.formatMessage({id:"pages.vipList.refCode"}),dataIndex:"refCode"},{title:"Guid",dataIndex:"guid"},{title:s.formatMessage({id:"pages.vipList.vipLevel"}),dataIndex:"vip",valueEnum:{vip1:{text:"VIP1",color:"#000000"},vip2:{text:"VIP2",color:"#CD7F32"},vip3:{text:"VIP3",color:"#FFD700"},svip:{text:"SVIP",color:"#87CEFA"}}},{title:s.formatMessage({id:"pages.vipList.invitee1Count"}),dataIndex:"invitee1Count",hideInSearch:!0,hideInDescriptions:!0,sorter:!0},{title:s.formatMessage({id:"pages.vipList.invitee1Count24"}),dataIndex:"invitee1Count24",hideInSearch:!0,hideInDescriptions:!0,sorter:!0},{title:s.formatMessage({id:"pages.vipList.invitee1Volume24"}),dataIndex:"invitee1Volume24",hideInSearch:!0,hideInDescriptions:!0,sorter:!0,renderText:function(u){return"$"+(0,n.B)(u,3)}},{title:s.formatMessage({id:"pages.vipList.commission"}),dataIndex:"commission",hideInSearch:!0,hideInDescriptions:!0,renderText:function(u){return"$"+(0,n.B)(u,3)}},{title:s.formatMessage({id:"pages.vipList.remark"}),dataIndex:"remark",hideInSearch:!0},{title:s.formatMessage({id:"pages.vipList.options"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(u,e){var E=[(0,g.jsx)(U.ZP,{type:"link",onClick:function(){var o;S(e),(o=ae.current)===null||o===void 0||o.setFieldValue("remark",e.remark),requestAnimationFrame(function(){P(!0)})},children:s.formatMessage({id:"pages.vipList.editRemark"})}),(0,g.jsx)(U.ZP,{type:"link",onClick:l()(v()().mark(function M(){return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,le(e);case 2:case"end":return r.stop()}},M)})),children:s.formatMessage({id:"pages.vipList.detail"})},"view")];return E}}],_e=[{title:"Guid",dataIndex:"guid"},{title:"Tg Username",dataIndex:"tgUsername"},{title:"Email",dataIndex:"email"},{title:s.formatMessage({id:"pages.vipList.refCode"}),dataIndex:"refCode"},{title:s.formatMessage({id:"pages.vipList.vipLevel"}),dataIndex:"vip",valueEnum:{vip1:{text:"VIP1",color:"#000000"},vip2:{text:"VIP2",color:"#CD7F32"},vip3:{text:"VIP3",color:"#FFD700"},svip:{text:"SVIP",color:"#87CEFA"}}},{},{title:s.formatMessage({id:"pages.vipList.remark"}),dataIndex:"remark",span:2},{title:s.formatMessage({id:"pages.vipList.commission"}),dataIndex:"commission",renderText:function(u){return"$"+(0,n.B)(u,6)}},{title:s.formatMessage({id:"pages.vipList.unclaimedCommission"}),dataIndex:"unclaimedCommission",renderText:function(u){return"$"+(0,n.B)(u,6)}},{title:s.formatMessage({id:"pages.vipList.claimedCommission"}),dataIndex:"claimedCommission",renderText:function(u){return"$"+(0,n.B)(u,6)}},{},{span:2,render:function(u,e){if(!e||!e.inviteeCountList||!e.inviteeVolume24HList||e.inviteeCountList.length!==5||e.inviteeVolume24HList.length!==5)return(0,g.jsx)("div",{});var E=[{type:s.formatMessage({id:"pages.vipList.invitee"}),total:e.totalInviteeCount+"",level1:e.inviteeCountList[0]+"",level2:e.inviteeCountList[1]+"",level3:e.inviteeCountList[2]+"",level4:e.inviteeCountList[3]+"",level5:e.inviteeCountList[4]+""},{type:s.formatMessage({id:"pages.vipList.volume24H"}),total:"$"+(0,n.B)(e.totalInviteeVolume24H,6),level1:"$"+(0,n.B)(e.inviteeVolume24HList[0],6),level2:"$"+(0,n.B)(e.inviteeVolume24HList[1],6),level3:"$"+(0,n.B)(e.inviteeVolume24HList[2],6),level4:"$"+(0,n.B)(e.inviteeVolume24HList[3],6),level5:"$"+(0,n.B)(e.inviteeVolume24HList[4],6)}];return(0,g.jsx)(x.Z,{columns:de,dataSource:E,pagination:!1})}}];return(0,g.jsxs)(L._z,{children:[(0,g.jsx)(D.Z,{actionRef:te,rowKey:"guid",search:{labelWidth:120},request:function(){var c=l()(v()().mark(function u(e,E){var M,o,r,w,F,Z,X,k,T;return v()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:F=!1,Z="",I.t0=v()().keys(E);case 3:if((I.t1=I.t0()).done){I.next=11;break}return X=I.t1.value,Z=X,k=E[X],(k==null?void 0:k.toString())=="descend"&&(F=!0),I.abrupt("break",11);case 11:return e.page=e==null?void 0:e.current,delete e.current,I.next=15,(0,h.zc)(e,Z,F);case 15:return T=I.sent,console.log({data:(M=T.data)===null||M===void 0?void 0:M.list,success:T.code==0,total:(o=T.data)===null||o===void 0?void 0:o.total}),I.abrupt("return",{data:(r=T.data)===null||r===void 0?void 0:r.list,success:T.code==0,total:(w=T.data)===null||w===void 0?void 0:w.total});case 18:case"end":return I.stop()}},u)}));return function(u,e){return c.apply(this,arguments)}}(),columns:oe}),(0,g.jsx)(R.Y,{formRef:ae,title:s.formatMessage({id:"pages.vipList.editRemark"}),open:a,onFinish:ue,onOpenChange:P,children:(0,g.jsx)(C.Z,{name:"remark",fieldProps:{maxLength:64}})}),(0,g.jsx)(j.Z,{width:600,open:ie,onClose:function(){S(void 0),N(void 0),ee(!1)},closable:!1,children:(0,g.jsx)(K.ZP,{column:2,title:s.formatMessage({id:"pages.vipList.detail.view"}),request:l()(v()().mark(function c(){return v()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:$||{}});case 1:case"end":return e.stop()}},c)})),params:{guid:$==null?void 0:$.guid},columns:_e})})]})};A.default=m},12095:function(G,A,t){t.d(A,{DJ:function(){return K},Nq:function(){return x},V8:function(){return L},fA:function(){return B},ig:function(){return O},zc:function(){return R}});var y=t(97857),v=t.n(y),b=t(15009),l=t.n(b),V=t(99289),f=t.n(V),h=t(80854),n="https://api.avevip.com";function L(m){return D.apply(this,arguments)}function D(){return D=f()(l()().mark(function m(d){var i;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.request)(n+"/api/user/getUserByRef",{method:"GET",params:{refCode:d}});case 2:if(i=a.sent,i.code===0){a.next=5;break}throw i.msg;case 5:return a.abrupt("return",i.data);case 6:case"end":return a.stop()}},m)})),D.apply(this,arguments)}function R(m,d,i){return C.apply(this,arguments)}function C(){return C=f()(l()().mark(function m(d,i,_){var a;return l()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i&&(d.sortField=i,d.sortDesc=_),p.next=3,(0,h.request)(n+"/api/user/getVipPageList",{method:"GET",params:v()({},d)});case 3:if(a=p.sent,a.code===0){p.next=6;break}throw a.msg;case 6:return p.abrupt("return",a);case 7:case"end":return p.stop()}},m)})),C.apply(this,arguments)}function K(m){return W.apply(this,arguments)}function W(){return W=f()(l()().mark(function m(d){var i;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.request)(n+"/api/user/getVipDetail",{method:"GET",params:{guid:d}});case 2:if(i=a.sent,i.code===0){a.next=5;break}throw i.msg;case 5:return a.abrupt("return",i.data);case 6:case"end":return a.stop()}},m)})),W.apply(this,arguments)}function B(m,d,i){return U.apply(this,arguments)}function U(){return U=f()(l()().mark(function m(d,i,_){var a;return l()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,h.request)(n+"/api/user/addSvip",{method:"POST",data:{guid:d,vip:i,remark:_}});case 2:if(a=p.sent,a.code===0){p.next=5;break}throw a.msg;case 5:return p.abrupt("return");case 6:case"end":return p.stop()}},m)})),U.apply(this,arguments)}function x(m,d){return j.apply(this,arguments)}function j(){return j=f()(l()().mark(function m(d,i){var _;return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,h.request)(n+"/api/user/updateUser",{method:"POST",data:v()({guid:d},i)});case 2:return _=P.sent,P.abrupt("return",_);case 4:case"end":return P.stop()}},m)})),j.apply(this,arguments)}function O(){return g.apply(this,arguments)}function g(){return g=f()(l()().mark(function m(){var d;return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,h.request)(n+"/api/overall/data",{method:"GET"});case 2:if(d=_.sent,d.code===0){_.next=5;break}throw d.msg;case 5:return _.abrupt("return",d.data);case 6:case"end":return _.stop()}},m)})),g.apply(this,arguments)}},65763:function(G,A,t){t.d(A,{B:function(){return v}});var y=t(90482);function v(b,l){if(!b)return"";var V=new y.Z(b),f=b.split(".");if(f.length!==2)return b;for(var h=f[0],n=f[1],L=0,D="",R=0;R<n.length;R++){var C=n[R];if(D.length>=l)break;C=="0"&&D.length==0?L=L+1:D=D+C}return L>3?h+".0{"+L+"}"+D:h+"."+"0".repeat(L)+D}}}]);
