"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[463],{37476:function(ee,L,e){e.d(L,{Y:function(){return k}});var O=e(74165),D=e(15861),h=e(1413),b=e(97685),X=e(91),W=e(73177),U=e(28459),K=e(28248),B=e(55917),F=e(21770),M=e(80334),o=e(67294),x=e(73935),y=e(78733),l=e(85893),S=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function k(m){var c,E,A=m.children,p=m.trigger,T=m.onVisibleChange,I=m.onOpenChange,r=m.modalProps,Z=m.onFinish,g=m.submitTimeout,V=m.title,G=m.width,P=m.visible,C=m.open,t=(0,X.Z)(m,S);(0,M.ET)(!t.footer||!(r!=null&&r.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var _=(0,o.useContext)(U.ZP.ConfigContext),N=(0,o.useState)([]),n=(0,b.Z)(N,2),ne=n[1],re=(0,o.useState)(!1),J=(0,b.Z)(re,2),Y=J[0],H=J[1],se=(0,F.Z)(!!P,{value:C||P,onChange:I||T}),Q=(0,b.Z)(se,2),$=Q[0],R=Q[1],w=(0,o.useRef)(null),te=(0,o.useCallback)(function(u){w.current===null&&u&&ne([]),w.current=u},[]),j=(0,o.useRef)(),ae=(0,o.useCallback)(function(){var u,s,a,d=(u=(s=t.form)!==null&&s!==void 0?s:(a=t.formRef)===null||a===void 0?void 0:a.current)!==null&&u!==void 0?u:j.current;d&&r!==null&&r!==void 0&&r.destroyOnClose&&d.resetFields()},[r==null?void 0:r.destroyOnClose,t.form,t.formRef]);(0,o.useImperativeHandle)(t.formRef,function(){return j.current},[j.current]),(0,o.useEffect)(function(){(C||P)&&(I==null||I(!0),T==null||T(!0))},[P,C]);var le=(0,o.useMemo)(function(){return p?o.cloneElement(p,(0,h.Z)((0,h.Z)({key:"trigger"},p.props),{},{onClick:function(){var u=(0,D.Z)((0,O.Z)().mark(function a(d){var v,i;return(0,O.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:R(!$),(v=p.props)===null||v===void 0||(i=v.onClick)===null||i===void 0||i.call(v,d);case 2:case"end":return f.stop()}},a)}));function s(a){return u.apply(this,arguments)}return s}()})):null},[R,p,$]),oe=(0,o.useMemo)(function(){var u,s,a,d,v,i;return t.submitter===!1?!1:(0,B.Z)({searchConfig:{submitText:(u=(s=r==null?void 0:r.okText)!==null&&s!==void 0?s:(a=_.locale)===null||a===void 0||(a=a.Modal)===null||a===void 0?void 0:a.okText)!==null&&u!==void 0?u:"\u786E\u8BA4",resetText:(d=(v=r==null?void 0:r.cancelText)!==null&&v!==void 0?v:(i=_.locale)===null||i===void 0||(i=i.Modal)===null||i===void 0?void 0:i.cancelText)!==null&&d!==void 0?d:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:g?Y:void 0,onClick:function(f){var z;R(!1),r==null||(z=r.onCancel)===null||z===void 0||z.call(r,f)}}},t.submitter)},[(c=_.locale)===null||c===void 0||(c=c.Modal)===null||c===void 0?void 0:c.cancelText,(E=_.locale)===null||E===void 0||(E=E.Modal)===null||E===void 0?void 0:E.okText,r,t.submitter,R,Y,g]),ue=(0,o.useCallback)(function(u,s){return(0,l.jsxs)(l.Fragment,{children:[u,w.current&&s?(0,l.jsx)(o.Fragment,{children:(0,x.createPortal)(s,w.current)},"submitter"):s]})},[]),ie=(0,o.useCallback)(function(){var u=(0,D.Z)((0,O.Z)().mark(function s(a){var d,v,i;return(0,O.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return d=Z==null?void 0:Z(a),g&&d instanceof Promise&&(H(!0),v=setTimeout(function(){return H(!1)},g),d.finally(function(){clearTimeout(v),H(!1)})),f.next=4,d;case 4:return i=f.sent,i&&R(!1),f.abrupt("return",i);case 7:case"end":return f.stop()}},s)}));return function(s){return u.apply(this,arguments)}}(),[Z,R,g]),de=(0,W.X)($);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(K.Z,(0,h.Z)((0,h.Z)((0,h.Z)({title:V,width:G||800},r),de),{},{onCancel:function(s){var a;g&&Y||(R(!1),r==null||(a=r.onCancel)===null||a===void 0||a.call(r,s))},afterClose:function(){var s;ae(),$&&R(!1),r==null||(s=r.afterClose)===null||s===void 0||s.call(r)},footer:t.submitter!==!1?(0,l.jsx)("div",{ref:te,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,l.jsx)(y.I,(0,h.Z)((0,h.Z)({formComponentType:"ModalForm",layout:"vertical"},t),{},{onInit:function(s,a){var d;t.formRef&&(t.formRef.current=a),t==null||(d=t.onInit)===null||d===void 0||d.call(t,s,a),j.current=a},formRef:j,submitter:oe,onFinish:function(){var u=(0,D.Z)((0,O.Z)().mark(function s(a){var d;return(0,O.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ie(a);case 2:return d=i.sent,i.abrupt("return",d);case 4:case"end":return i.stop()}},s)}));return function(s){return u.apply(this,arguments)}}(),contentRender:ue,children:A}))})),le]})}},46596:function(ee,L,e){e.r(L),e.d(L,{AvatarName:function(){return S}});var O=e(15009),D=e.n(O),h=e(99289),b=e.n(h),X=e(5574),W=e.n(X),U=e(23303),K=e(37476),B=e(5966),F=e(80854),M=e(2453),o=e(2487),x=e(28036),y=e(67294),l=e(85893),S=function(){var c=(0,F.useModel)("@@initialState"),E=c.initialState,A=E||{},p=A.userInfo;return p==null?void 0:p.username},k=function(){var c=(0,F.useIntl)(),E=(0,y.useState)(!1),A=W()(E,2),p=A[0],T=A[1],I=(0,y.useState)(!1),r=W()(I,2),Z=r[0],g=r[1],V=function(){var P=b()(D()().mark(function C(t){var _;return D()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,U.C2)(t.username);case 3:if(_=n.sent,_.code===0){n.next=9;break}if(_.code!=-2){n.next=8;break}return M.ZP.error(_.msg),n.abrupt("return",!1);case 8:throw _.msg;case 9:return M.ZP.success(c.formatMessage({id:"pages.vipList.update.success"})),n.abrupt("return",!0);case 13:return n.prev=13,n.t0=n.catch(0),M.ZP.error(c.formatMessage({id:"pages.vipList.update.error"})),n.abrupt("return",!1);case 17:case"end":return n.stop()}},C,null,[[0,13]])}));return function(t){return P.apply(this,arguments)}}(),G=function(){var P=b()(D()().mark(function C(t){var _;return D()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.password==t.passwordAgain){n.next=3;break}return M.ZP.error("\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4"),n.abrupt("return",!1);case 3:return n.prev=3,n.next=6,(0,U.$5)(t.oldPassword,t.password);case 6:if(_=n.sent,_.code===0){n.next=12;break}if(_.code!=-2){n.next=11;break}return M.ZP.error(_.msg),n.abrupt("return",!1);case 11:throw _.msg;case 12:return M.ZP.success(c.formatMessage({id:"pages.vipList.update.success"})),n.abrupt("return",!0);case 16:return n.prev=16,n.t0=n.catch(3),M.ZP.error(c.formatMessage({id:"pages.vipList.update.error"})),n.abrupt("return",!1);case 20:case"end":return n.stop()}},C,null,[[3,16]])}));return function(t){return P.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.Z,{itemLayout:"horizontal",children:[(0,l.jsx)(o.Z.Item,{actions:[(0,l.jsx)(x.ZP,{type:"link",onClick:function(){T(!0)},children:"\u4FEE\u6539"})],children:(0,l.jsx)(o.Z.Item.Meta,{title:"\u7528\u6237\u540D",description:"\u5F53\u524D\u7528\u6237\u540D: "+S()})}),(0,l.jsx)(o.Z.Item,{actions:[(0,l.jsx)(x.ZP,{type:"link",onClick:function(){g(!0)},children:"\u4FEE\u6539"})],children:(0,l.jsx)(o.Z.Item.Meta,{title:"\u5BC6\u7801",description:"\u957F\u5EA6\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E10"})})]}),(0,l.jsx)(K.Y,{title:"\u4FEE\u6539\u7528\u6237\u540D",open:p,onFinish:V,onOpenChange:T,children:(0,l.jsx)(B.Z,{name:"username",fieldProps:{maxLength:24},rules:[{required:!0,message:"Please enter username!"},{min:5,message:"length min 5"}]})}),(0,l.jsxs)(K.Y,{title:"\u4FEE\u6539\u5BC6\u7801",open:Z,onFinish:G,onOpenChange:g,children:[(0,l.jsx)(B.Z.Password,{name:"oldPassword",fieldProps:{maxLength:24},label:"\u65E7\u5BC6\u7801",rules:[{required:!0,message:"Please enter new password!"},{min:6,message:"length min 6"}]}),(0,l.jsx)(B.Z.Password,{name:"password",fieldProps:{maxLength:24},label:"\u65B0\u5BC6\u7801",rules:[{required:!0,message:"Please enter new password!"},{min:6,message:"length min 6"}]}),(0,l.jsx)(B.Z.Password,{name:"passwordAgain",fieldProps:{maxLength:24},label:"\u518D\u6B21\u8F93\u5165",rules:[{required:!0,message:"Please enter new password!"},{min:6,message:"length min 6"}]})]})]})};L.default=k}}]);
